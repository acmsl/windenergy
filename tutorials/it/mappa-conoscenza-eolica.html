<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mappa delle Conoscenze sull'Energia Eolica - ACMSL</title>
  <link rel="stylesheet" href="../tutorial.css">
  <style>
    /* ── Mindmap-specific styles ── */
    .mindmap-container {
      position: relative;
      background: var(--card-bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      margin: 0;
      overflow: hidden;
    }

    .mindmap-toolbar {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      padding: 0.7rem 1rem;
      background: linear-gradient(135deg, #f8fbff, #eef4fa);
      border-bottom: 1px solid #dde6ef;
      flex-wrap: wrap;
    }

    .mindmap-toolbar button {
      background: var(--primary);
      color: white;
      border: none;
      padding: 0.4rem 1rem;
      border-radius: 999px;
      font-size: 0.82rem;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s, box-shadow 0.2s;
      box-shadow: 0 2px 6px rgba(0,102,153,0.2);
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
    }

    .mindmap-toolbar button:hover {
      background: #005580;
      transform: translateY(-1px);
      box-shadow: 0 4px 10px rgba(0,102,153,0.3);
    }

    .mindmap-toolbar button:active {
      transform: translateY(0);
    }

    .mindmap-toolbar button.secondary {
      background: rgba(0,102,153,0.1);
      color: var(--primary);
      box-shadow: none;
      border: 1px solid rgba(0,102,153,0.2);
    }

    .mindmap-toolbar button.secondary:hover {
      background: rgba(0,102,153,0.18);
      box-shadow: 0 2px 6px rgba(0,102,153,0.1);
    }

    .mindmap-toolbar .separator {
      width: 1px;
      height: 1.4rem;
      background: #ccd6df;
      margin: 0 0.3rem;
    }

    .mindmap-toolbar .info {
      font-size: 0.78rem;
      color: #6a8090;
      margin-left: auto;
    }

    .mindmap-svg-wrap {
      width: 100%;
      height: calc(100vh - 310px);
      min-height: 400px;
      cursor: grab;
    }

    .mindmap-svg-wrap:active {
      cursor: grabbing;
    }

    .mindmap-svg-wrap svg {
      width: 100%;
      height: 100%;
      display: block;
    }

    /* D3 tree nodes */
    .mm-node circle {
      stroke-width: 2px;
      cursor: pointer;
      transition: r 0.15s;
    }

    .mm-node circle:hover {
      filter: brightness(1.15);
    }

    .mm-node text {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      pointer-events: none;
    }

    .mm-node .node-label {
      fill: var(--dark);
      font-size: 12px;
    }

    .mm-node .node-label-root {
      fill: var(--dark);
      font-size: 14px;
      font-weight: 700;
    }

    .mm-node .link-icon {
      cursor: pointer;
      pointer-events: all;
      opacity: 0.7;
      transition: opacity 0.2s;
    }

    .mm-node .link-icon:hover {
      opacity: 1;
    }

    .mm-link {
      fill: none;
      stroke-width: 1.5px;
      opacity: 0.5;
    }

    /* Badge showing child count on collapsed nodes */
    .mm-badge {
      font-size: 9px;
      fill: white;
      font-weight: 700;
      pointer-events: none;
      text-anchor: middle;
      dominant-baseline: central;
    }

    /* Search bar */
    .mindmap-search {
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }

    .mindmap-search input {
      padding: 0.35rem 0.7rem;
      border: 1px solid #ccd6df;
      border-radius: 999px;
      font-size: 0.82rem;
      width: 180px;
      outline: none;
      transition: border-color 0.2s, box-shadow 0.2s;
    }

    .mindmap-search input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(0,102,153,0.12);
    }

    .highlight-match circle {
      stroke: #ff9900 !important;
      stroke-width: 3px !important;
    }

    /* Tooltip */
    .mm-tooltip {
      position: absolute;
      background: var(--dark);
      color: white;
      padding: 0.4rem 0.8rem;
      border-radius: 6px;
      font-size: 0.78rem;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.15s;
      max-width: 350px;
      word-wrap: break-word;
      z-index: 100;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }

    .mm-tooltip.visible {
      opacity: 1;
    }

    /* Loading / Error states */
    .mindmap-status {
      display: flex;
      align-items: center;
      justify-content: center;
      height: calc(100vh - 310px);
      min-height: 400px;
      flex-direction: column;
      gap: 1rem;
      color: #6a8090;
    }

    .mindmap-status .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid #dde6ef;
      border-top: 4px solid var(--primary);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .mindmap-status.error {
      color: #cc3333;
    }

    .mindmap-status.error .icon {
      font-size: 2rem;
    }

    /* Override tut-content max-width for full-width mindmap */
    .tut-content.full-width {
      max-width: 100%;
      padding: 0 1rem;
    }

    /* Breadcrumb / path display */
    .mindmap-breadcrumb {
      font-size: 0.78rem;
      color: #6a8090;
      padding: 0.4rem 1rem;
      background: #f8fbff;
      border-top: 1px solid #eef2f7;
      min-height: 1.6rem;
    }

    .mindmap-breadcrumb span {
      color: var(--primary);
      font-weight: 500;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .mindmap-svg-wrap {
        height: calc(100vh - 350px);
      }
      .mindmap-toolbar {
        padding: 0.5rem 0.7rem;
      }
      .mindmap-search input {
        width: 130px;
      }
    }
  </style>
</head>
<body>

<header class="tut-header">
  <div class="tut-header-row">
    <div class="tut-header-left">
      <img src="../../img/ACM_LOGO.png" alt="ACMSL" class="logo">
      <a href="https://www.acm-sl.com" class="brand">ACMSL</a>
    </div>
    <nav>
<a href="../en/introduction.html">Introduzione</a>
    <a href="turbine-eoliche-industriali.html">Turbine eoliche</a>
    <a href="famiglie-turbine-eoliche.html">Famiglie</a>
    <a href="intervalli-operativi-vento.html">Intervalli di vento</a>
    <a href="../en/simulators-and-tutorials.html">Simulatori</a>
    <a href="mappa-conoscenza-eolica.html" class="active">Mappa conoscenza</a>
    </nav>
  </div>
  <div class="tut-header-toolbar">
    <div class="tut-toolbar-actions">
      <a href="../../index.html?lang=it">&#127968; Home</a>
      <a href="https://www.acm-sl.com/en/contact" target="_blank" rel="noopener">&#127760; Contatto</a>
    </div>
    <div class="tut-lang-selector">
      <select onchange="window.location.href = this.value" aria-label="Language">
        <option value="../en/wind-energy-mindmap.html">EN</option>
        <option value="../es/mapa-mental.html">ES</option>
        <option value="../fr/carte-mentale.html">FR</option>
        <option value="../it/mappa-conoscenza-eolica.html" selected>IT</option>
        <option value="../de/windenergie-wissenskarte.html">DE</option>
        <option value="../pt/mapa-conhecimento-eolico.html">PT</option>
      </select>
    </div>
  </div>
</header>

<section class="tut-hero">
  <h1>Mappa delle Conoscenze Interattiva</h1>
  <p>Esplora l'albero completo delle conoscenze sull'energia eolica &mdash; clicca sui nodi per espandere, zoom e spostamento per navigare</p>
</section>

<main class="tut-content full-width">

  <div class="mindmap-container" id="mindmap-container">
    <div class="mindmap-toolbar" id="toolbar">
      <button id="btn-expand" title="Espandi tutti i nodi">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M12 5v14M5 12h14"/></svg>
        Espandi tutto
      </button>
      <button id="btn-collapse" title="Comprimi a 2 livelli">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M5 12h14"/></svg>
        Comprimi tutto
      </button>
      <div class="separator"></div>
      <button id="btn-reset" class="secondary" title="Reimposta zoom e posizione">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><circle cx="12" cy="12" r="3"/><path d="M12 2v4M12 18v4M2 12h4M18 12h4"/></svg>
        Reimposta vista
      </button>
      <button id="btn-zoom-in" class="secondary" title="Ingrandisci">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><circle cx="11" cy="11" r="7"/><path d="M21 21l-4-4M8 11h6M11 8v6"/></svg>
      </button>
      <button id="btn-zoom-out" class="secondary" title="Riduci">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><circle cx="11" cy="11" r="7"/><path d="M21 21l-4-4M8 11h6"/></svg>
      </button>
      <div class="separator"></div>
      <div class="mindmap-search">
        <input type="text" id="search-input" placeholder="Cerca nodi..." aria-label="Cerca nodi">
        <button id="btn-search" class="secondary" title="Cerca">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><circle cx="11" cy="11" r="7"/><path d="M21 21l-4-4"/></svg>
        </button>
        <button id="btn-clear-search" class="secondary" title="Cancella ricerca" style="display:none">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M18 6L6 18M6 6l12 12"/></svg>
        </button>
      </div>
      <span class="info" id="toolbar-info"></span>
    </div>

    <div class="mindmap-svg-wrap" id="svg-wrap">
      <div class="mindmap-status" id="loading-status">
        <div class="spinner"></div>
        <div>Caricamento mappa delle conoscenze...</div>
      </div>
    </div>

    <div class="mindmap-breadcrumb" id="breadcrumb">&nbsp;</div>
  </div>

  <div class="mm-tooltip" id="tooltip"></div>

</main>

<footer class="tut-footer">
  &copy; 2026 <a href="https://www.acm-sl.com">Automated Computing Machinery SL (ACMSL)</a>. Tutti i diritti riservati.
</footer>

<script src="../js/d3.v7.min.js"></script>
<script src="../js/mm-render.js"></script>

</body>
</html>
