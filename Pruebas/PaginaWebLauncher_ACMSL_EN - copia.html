<!DOCTYPE html>

<html lang="en">
<head>
<link href="favicon.ico" rel="icon" type="image/x-icon"/>
<link href="favicon.ico" rel="shortcut icon" type="image/x-icon"/>
<meta charset="utf-8"/>
<title>Wind Energy Applications</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<style>
    :root {
      --primary: #006699;
      --primary-light: #e3f4ff;
      --dark: #123047;
      --bg: #f5f7fb;
      --card-bg: #ffffff;
      --accent: #00a878;
      --danger: #c0392b;
      --radius: 12px;
      --shadow: 0 10px 25px rgba(0,0,0,0.08);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      background: var(--bg);
      color: var(--dark);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      background: linear-gradient(135deg, var(--primary), #0099cc);
      color: white;
      padding: 1.25rem 2rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      position: sticky;
      top: 0;
      z-index: 10;
    }

    header h1 {
      font-size: 1.4rem;
      font-weight: 600;
    }

    header p {
      font-size: 0.9rem;
      opacity: 0.9;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 0.9rem;
    }

    .logo-acm {
      height: 37px;
      width: auto;
      display: block;
    }

    .acmsl-text {
      font-size: 1.8rem;
      font-weight: 700;
      color: #ffffff;
      text-decoration: none;
      letter-spacing: 0.06em;
    }

    .acmsl-text:hover {
      text-decoration: underline;
    }


    .home-btn {
      border: none;
      background: rgba(255,255,255,0.12);
      color: white;
      padding: 0.6rem 1rem;
      border-radius: 999px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.9rem;
      transition: background 0.2s, transform 0.1s;
    }

    .home-btn:hover {
      background: rgba(255,255,255,0.25);
      transform: translateY(-1px);
    }

    main {
      flex: 1;
      max-width: 1100px;
      margin: 1.5rem auto 2rem;
      padding: 0 1rem;
      width: 100%;
    }

    section {
      display: none;
      animation: fadeIn 0.25s ease-out;
    }

    section.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(6px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    .section-header {
      margin-bottom: 1.5rem;
    }

    .section-header h2 {
      font-size: 1.3rem;
      margin-bottom: 0.3rem;
      color: var(--dark);
    }

    .section-header p {
      font-size: 0.95rem;
      color: #4a5a6a;
    }

    /* GRID LANDING 6 OPCIONES */
    .grid-6 {
      display: grid;
      grid-template-columns: repeat(auto-fit,minmax(300px,1fr));
      gap: 1.25rem;
    }

    .card {
      position: relative;
      background: var(--card-bg);
      border-radius: var(--radius);
      padding: 0;
      border: none;
      box-shadow: var(--shadow);
      cursor: pointer;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      min-height: 180px;
      transition: transform 0.12s ease-out, box-shadow 0.12s ease-out;
    }

    .card:hover {
      transform: translateY(-3px);
      box-shadow: 0 14px 28px rgba(0,0,0,0.12);
    }

    .card-image {
      flex: 1;
      background-size: cover;
      background-position: center;
      filter: brightness(0.85);
      transition: filter 0.2s ease-out, opacity 0.2s ease-out;
    }

    .card-overlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.55), rgba(0,0,0,0.15));
      display: flex;
      align-items: flex-end;
      justify-content: center;
      padding: 1rem;
      text-align: center;
    }

    .card-title {
      color: white;
      font-weight: 600;
      text-shadow: 0 2px 4px rgba(0,0,0,0.5);
      font-size: 1.05rem;
    }

    /* HELP TEXT ON HOVER (OPCIONES 4 y 5 EN LANDING) */
    .card-help-text {
      position: absolute;
      inset: 0;
      padding: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      background: var(--primary-light);
      color: var(--dark);
      font-size: 0.95rem;
      font-weight: 500;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s ease-out;
    }

    .card.help:hover .card-image,
    .card.help:hover .card-overlay {
      opacity: 0;
    }

    .card.help:hover .card-help-text {
      opacity: 1;
    }

    /* SUBOPCIONES */
    .suboptions {
      display: grid;
      grid-template-columns: repeat(auto-fit,minmax(260px,1fr));
      gap: 1.25rem;
    }

    .sub-card {
      background: var(--card-bg);
      border-radius: var(--radius);
      padding: 1.1rem 1.2rem;
      box-shadow: var(--shadow);
      border-left: 4px solid var(--primary);
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
    }

    .sub-card h3 {
      font-size: 1.02rem;
      color: var(--dark);
    }

    .sub-card p {
      font-size: 0.9rem;
      color: #4a5a6a;
      flex: 1;
    }

    .btn-row {
      margin-top: 0.5rem;
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .btn {
      border-radius: 999px;
      border: none;
      padding: 0.5rem 0.9rem;
      font-size: 0.9rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      transition: background 0.15s, transform 0.1s, box-shadow 0.1s;
      box-shadow: 0 2px 6px rgba(0,0,0,0.12);
    }

    .btn-primary {
      background: var(--primary);
      color: white;
    }
    .btn-primary:hover {
      background: #005580;
      transform: translateY(-1px);
    }

    .btn-secondary {
      background: #ecf1f8;
      color: var(--dark);
    }
    .btn-secondary:hover {
      background: #dde5f2;
      transform: translateY(-1px);
    }

    .btn-ghost {
      background: transparent;
      border: 1px solid #c4cfdd;
      box-shadow: none;
    }
    .btn-ghost:hover {
      background: #edf1f8;
    }

    /* OPCION 3: 3 CARDS EN UNA FILA */
    .row-3 {
      display: grid;
      grid-template-columns: repeat(3, minmax(0,1fr));
      gap: 1.25rem;
    }

    @media (max-width: 900px) {
      .row-3 {
        grid-template-columns: repeat(auto-fit,minmax(240px,1fr));
      }
    }

    .sim-card {
      position: relative;
      background: var(--card-bg);
      border-radius: var(--radius);
      overflow: hidden;
      min-height: 190px;
      box-shadow: var(--shadow);
      cursor: pointer;
      display: flex;
      flex-direction: column;
      transition: transform 0.12s, box-shadow 0.12s;
    }

    .sim-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 14px 28px rgba(0,0,0,0.12);
    }

    .sim-image {
      flex: 1;
      background-size: cover;
      background-position: center;
      filter: brightness(0.85);
      transition: opacity 0.2s ease-out;
    }

    .sim-overlay {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      padding: 0.9rem;
      background: linear-gradient(to top, rgba(0,0,0,0.5), rgba(0,0,0,0.1));
      color: white;
      font-weight: 600;
      text-align: center;
      font-size: 0.98rem;
    }

    .sim-help {
      position: absolute;
      inset: 0;
      padding: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      background: var(--primary-light);
      color: var(--dark);
      opacity: 0;
      transition: opacity 0.2s ease-out;
      font-size: 0.93rem;
      font-weight: 500;
    }

    .sim-card:hover .sim-image,
    .sim-card:hover .sim-overlay {
      opacity: 0;
    }

    .sim-card:hover .sim-help {
      opacity: 1;
    }

    /* VIDEOS */
    .video-wrapper {
      background: var(--card-bg);
      border-radius: var(--radius);
      padding: 1.1rem 1.25rem 1.4rem;
      box-shadow: var(--shadow);
    }

    .video-wrapper h3 {
      margin-bottom: 0.3rem;
    }

    .video-wrapper p {
      font-size: 0.9rem;
      margin-bottom: 0.8rem;
      color: #4a5a6a;
    }

    .video-frame {
      position: relative;
      width: 100%;
      padding-bottom: 56.25%; /* 16:9 */
      border-radius: 10px;
      overflow: hidden;
      background: #000;
    }

    .video-frame iframe {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      border: 0;
    }

    /* PEQUE√ëO TOAST PARA ERRORES / ESTADO */
    .toast {
      position: fixed;
      bottom: 1.2rem;
      right: 1.2rem;
      background: #333;
      color: #fff;
      padding: 0.6rem 0.9rem;
      border-radius: 999px;
      font-size: 0.85rem;
      opacity: 0;
      transform: translateY(10px);
      pointer-events: none;
      transition: opacity 0.2s, transform 0.2s;
      z-index: 20;
    }

    .toast.show {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }

  </style>
</head>
<body>
<header>
<div class="header-left">
<img alt="Logo ACM" class="logo-acm" src="ACM_LOGO_42x37.png"/>
<a class="acmsl-text" href="https://www.acm-sl.com" rel="noopener noreferrer" target="_blank">ACMSL</a>
<div>
<h1>Wind Energy Applications</h1>
<p>Select an option to access simulators, training resources, and multimedia material.</p>
</div>
</div>
<button class="home-btn" onclick="showSection('landing')" type="button">‚¨Ö Back to home</button>
</header>
<main>
<!-- LANDING: 6 OPCIONES -->
<section class="active" id="landing">
<div class="section-header">
<h2>Select a category</h2>
<p>Click on one of the following options to access the corresponding applications.</p>
</div>
<div class="grid-6">
<!-- 1. Introducci√≥n a la Energ√≠a E√≥lica -->
<button class="card" data-target="opcion1" type="button">
<div class="card-image" style="background-image:url('img/opcion1-introduccion.jpg');"></div>
<div class="card-overlay">
<div class="card-title">Introduction to Wind Energy</div>
</div>
</button>
<!-- 2. Parques e√≥licos -->
<button class="card" data-target="opcion2" type="button">
<div class="card-image" style="background-image:url('img/ParqueEolico.png');"></div>
<div class="card-overlay">
<div class="card-title">Wind Farms</div>
</div>
</button>
<!-- 3. Aerogeneradores en Parques E√≥licos -->
<button class="card" data-target="opcion3" type="button">
<div class="card-image" style="background-image:url('img/opcion3-aerogeneradores.jpg');"></div>
<div class="card-overlay">
<div class="card-title">Wind Turbines in Wind Farms</div>
</div>
</button>
<!-- 4. An√°lisis del Tren de Potencia (hover ayuda) -->
<button class="card help" data-target="opcion4" type="button">
<div class="card-image" style="background-image:url('img/opcion4-tren-potencia.jpg');"></div>
<div class="card-overlay">
<div class="card-title">Power Train Analysis</div>
</div>
<div class="card-help-text">This program allows you to analyze the behavior of a wind turbine power train, identifying losses, efficiencies, and critical operating points.</div>
</button>
<!-- 5. C√°lculos sobre Back-to-Back converters (hover ayuda) -->
<button class="card help" data-target="opcion5" type="button">
<div class="card-image" style="background-image:url('img/opcion5-back-to-back.jpg');"></div>
<div class="card-overlay">
<div class="card-title">Back-to-Back Converter Calculations</div>
</div>
<div class="card-help-text">This program allows you to perform calculations and analysis on Back-to-Back converters, evaluating currents, voltages, harmonics, and control strategies.</div>
</button>
<!-- 6. V√≠deos interesantes -->
<button class="card" data-target="opcion6" type="button">
<div class="card-image" style="background-image:url('img/opcion6-videos.jpg');"></div>
<div class="card-overlay">
<div class="card-title">Interesting Videos</div>
</div>
</button>
</div>
</section>
<!-- OPCI√ìN 1: INTRODUCCI√ìN A LA ENERG√çA E√ìLICA -->
<section id="opcion1">
<div class="section-header">
<h2>Introduction to Wind Energy</h2>
<p>Select one of the available applications.</p>
</div>
<div class="suboptions">
<!-- 1-1 -->
<div class="sub-card">
<h3>1-1 Mental map of Wind Energy concepts</h3>
<p>Access an interactive mental map with the fundamental concepts of wind energy.</p>
<div class="btn-row">
<button class="btn btn-primary" onclick="runBatch('mapa_mental_energia_eolica.bat')" type="button">‚ñ∂ Run process</button>
</div>
</div>
<!-- 1-2 -->
<div class="sub-card">
<h3>1-2 Training on industrial aspects of Wind Energy</h3>
<p>Start a training session focused on the industrial reality of the wind energy sector.</p>
<div class="btn-row">
<button class="btn btn-primary" onclick="window.location.href='acmsl://viewertutorial%20-h2E127E3F42CB2E134F3913443F43BD4834BA44C30242B4E64AF3914834AF5074A442B4FC4C54E63F44414C54BA4623F43024C54E64AF42B4414834C54BA1EF4574BA1EF42B4F14D04574414FC4C54F11EF4834BA44C5074F14FC4E648342B4A44574F11EF44C4571EF4A442B1EF2F74BA4574E646D48342B1EF2F74C54A448344142B3F43234BA4FC4E64C544C5074414414834C54BA1FA4784FC4AF4A4'" type="button">‚ñ∂ Run process</button>
</div>
</div>
</div>
</section>
<!-- OPCI√ìN 2: PARQUES E√ìLICOS -->
<section id="opcion2">
<div class="section-header">
<h2>Wind Farms</h2>
<p>Choose the tool related to wind farms.</p>
</div>
<div class="suboptions">
<!-- 2-1 -->
<div class="sub-card">
<h3>2-1 Launch Wind Farm Simulator</h3>
<p>Runs the complete wind farm simulator for production and operational analysis.</p>
<div class="btn-row">
<button class="btn btn-primary" onclick="runBatch('simulador_parque_eolico.bat')" type="button">‚ñ∂ Run simulator</button>
</div>
</div>
<!-- 2-2 -->
<div class="sub-card">
<h3>2-2 Guided exploration of the Control Center</h3>
<p>Open the available guide of the wind farm Control Center (SCADA), with a guided exploration of its functionalities.</p>
<div class="btn-row">
<button class="btn btn-secondary" onclick="abrirGuiaSCADA()" type="button">üìñ Open SCADA guide</button>
</div>
</div>
</div>
</section>
<!-- OPCI√ìN 3: AEROGENERADORES EN PARQUES E√ìLICOS -->
<section id="opcion3">
<div class="section-header">
<h2>Wind Turbines in Wind Farms</h2>
<p>Hover over each simulator to see its description and click to launch it.</p>
</div>
<div class="row-3">
<!-- 3-1 -->
<div class="sim-card" onclick="runBatch('sim_aerogenerador_jaula_active_stall.bat')">
<div class="sim-image" style="background-image:url('img/sim-3-1.jpg');"></div>
<div class="sim-overlay">3-1 Squirrel cage generator (Active Stall)</div>
<div class="sim-help">This simulator is used to analyze the behavior of a wind turbine with a squirrel cage generator and <em>Active Stall</em> control, including power curves and response to wind variations.</div>
</div>
<!-- 3-2 -->
<div class="sim-card" onclick="runBatch('sim_aerogenerador_control_resistencia_rotor.bat')">
<div class="sim-image" style="background-image:url('img/sim-3-2.jpg');"></div>
<div class="sim-overlay">3-2 Rotor Resistance Control</div>
<div class="sim-help">This simulator is used to study power and torque control in wind turbines by varying rotor resistance, allowing exploration of different operating scenarios.</div>
</div>
<!-- 3-3 -->
<div class="sim-card" onclick="runBatch('sim_aerogenerador_dfig.bat')">
<div class="sim-image" style="background-image:url('img/sim-3-3.jpg');"></div>
<div class="sim-overlay">3-3 Doubly Fed Induction Generator (DFIG)</div>
<div class="sim-help">This simulator is used to analyze a wind turbine with a doubly fed induction generator (DFIG), including vector control strategies and interaction with the electrical grid.</div>
</div>
</div>
</section>
<!-- OPCI√ìN 4: AN√ÅLISIS DEL TREN DE POTENCIA -->
<section id="opcion4">
<div class="section-header">
<h2>Power Train Analysis</h2>
<h3>Program for detailed study of the power train of a variable blade-speed wind turbine.</h3>
</div>
<div class="sub-card">
<h3>Launch power train analysis tool</h3>
<p>To extract the maximum available power from the wind, the rotational speed of the blades must be adjusted according to wind speed.</p>
<p>This program allows you to study each component of the power train (gearbox, shaft, generator, etc.), evaluating losses, efficiencies, and dynamic response.</p>
<div class="btn-row">
<button class="btn btn-primary" onclick="runBatch('analisis_tren_potencia.bat')" type="button">‚ñ∂ Run tool</button>
</div>
</div>
</section>
<!-- OPCI√ìN 5: C√ÅLCULOS SOBRE BACK-TO-BACK CONVERTERS -->
<section id="opcion5">
<div class="section-header">
<h2>Back-to-Back Converter Calculations</h2>
<p>Analysis and calculation tool for Back-to-Back converters.</p>
</div>
<div class="sub-card">
<h3>Launch Back-to-Back calculation tool</h3>
<p>This program allows you to analyze currents, voltages, losses, and harmonics in Back-to-Back converters, as well as study different control strategies.</p>
<div class="btn-row">
<button class="btn btn-primary" onclick="runBatch('calculos_back_to_back.bat')" type="button">‚ñ∂ Run tool</button>
</div>
</div>
</section>
<!-- OPCI√ìN 6: V√çDEOS INTERESANTES -->
<section id="opcion6">
<div class="section-header">
<h2>Interesting Videos</h2>
<p>Access selected videos about wind energy and wind turbine technology.</p>
</div>
<div class="video-wrapper">
<h3>Video 1: Introduction to Wind Energy</h3>
<p>Subtitle: Overview of wind power generation, main wind turbine components, and basic design aspects.</p>
<!-- Sustituye el src del iframe por el enlace concreto del v√≠deo -->
<div class="video-frame">
<iframe allowfullscreen="" src="https://www.youtube.com/embed/dQw4w9WgXcQ" title="Introducci√≥n a la Energ√≠a E√≥lica"></iframe>
</div>
<div class="btn-row" style="margin-top:0.9rem;">
<button class="btn btn-secondary" onclick="abrirVideoEnVentana()" type="button">‚ßâ Open video in new window</button>
</div>
</div>
</section>
</main>
<div class="toast" id="toast"></div>
<script>
  // --- Navegaci√≥n entre "p√°ginas" (secciones) ---
  function showSection(id) {
    document.querySelectorAll('main section').forEach(sec => {
      sec.classList.toggle('active', sec.id === id);
    });
  }

  // Click en las tarjetas del landing
  document.querySelectorAll('.card[data-target]').forEach(card => {
    card.addEventListener('click', () => {
      const target = card.getAttribute('data-target');
      showSection(target);
    });
  });

  // --- Lanzamiento de procesos batch en el servidor ---
  function showToast(msg, type = 'info') {
    const toast = document.getElementById('toast');
    toast.textContent = msg;
    toast.style.background =
      type === 'error' ? '#c0392b' :
      type === 'success' ? '#00a878' : '#333';
    toast.classList.add('show');
    setTimeout(() => toast.classList.remove('show'), 3000);
  }

  async function runBatch(batchName) {
    try {
      // Ajusta la URL y el cuerpo seg√∫n tu backend real
      const res = await fetch('/api/run-batch', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ script: batchName })
      });

      if (!res.ok) {
        throw new Error('Server response error');
      }

      showToast('Process started: ' + batchName, 'success');
    } catch (err) {
      console.error(err);
      showToast('The batch process could not be started.', 'error');
    }
  }

  // Abre la gu√≠a SCADA existente (ruta relativa que comentas)
  function abrirGuiaSCADA() {
    window.location.href = 'Guia_Simulador_WFS_SCADA_Parque_Eolico/index.html';
  }

  // Abre el v√≠deo de la opci√≥n 6 en otra ventana/pesta√±a
  function abrirVideoEnVentana() {
    const urlVideo = 'https://www.youtube.com/watch?v=dQw4w9WgXcQ'; // sustituir por tu URL real
    window.open(urlVideo, '_blank', 'noopener');
  }
</script>
</body>
</html>
